(self.webpackChunkelementor=self.webpackChunkelementor||[]).push([[723],{5686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class LightboxManager extends elementorModules.ViewModule{getDefaultSettings(){return{selectors:{links:'a, [data-elementor-lightbox]'},classes:{isLightboxLink:"elementor-clickable"}}}getDefaultElements(){return{$links:jQuery(this.getSettings("selectors.links"))}}isLightboxLink(e){if("a"===e.tagName.toLowerCase()&&(e.hasAttribute("download")||!/^[^?]+\.(png|jpe?g|gif|svg|webp)(\?.*)?$/i.test(e.href))&&!e.dataset.elementorLightbox)return!1;const t=elementorFrontend.getKitSettings("global_image_lightbox"),n=e.dataset.elementorOpenLightbox;return"yes"===n||t&&"no"!==n}async onLinkClick(e){const t=e.currentTarget,n=jQuery(e.target),i=elementorFrontend.isEditMode(),s=i&&elementor.$previewContents.find("body").hasClass("elementor-editor__ui-state__color-picker"),o=!!n.closest(".elementor-edit-area").length;if(!this.isLightboxLink(t))return void(i&&o&&e.preventDefault());if(e.preventDefault(),i&&!elementor.getPreferences("lightbox_in_editor"))return;if(s)return;this.isOptimizedAssetsLoading()?await elementorFrontend.utils.lightbox:elementorFrontend.utils.lightbox=await Promise.resolve().then(()=>this.createLightbox(t));const r=jQuery(t);let a={type:"image",id:r.data("elementor-lightbox-video")?r.data("elementor-lightbox-video"):r.data("elementor-lightbox-slideshow")?r.data("elementor-lightbox-slideshow"):null};if(r.data("elementor-lightbox-video")||r.data("elementor-lightbox-slideshow"))a.url=t.href,a.type="video";else{a.url=t.href,a.type="image";const e=r.data("elementor-lightbox-index");if(void 0!==e){const t=jQuery(this.getSettings("selectors.links")).filter((function(){const t=jQuery(this);return t.data("elementor-lightbox-index")===e&&t.data("elementor-lightbox-slideshow")===r.data("elementor-lightbox-slideshow")}));let n=[];t.each((function(){const e=this.dataset.elementorLightboxVideo;let t=this.href;e&&(t=e),n.push({url:t,type:e?"video":"image"})})),0<n.length&&(a.url=n,a.type="slideshow",a.modalOptions={id:e,startAt:e,videoAspectRatio:t.data("aspect-ratio")})}}elementorFrontend.utils.lightbox.showModal(a)}isOptimizedAssetsLoading(){return elementorFrontend.config.experimentalFeatures.e_optimized_assets_loading}bindEvents(){elementorFrontend.elements.$document.on("click",this.getSettings("selectors.links"),(e=>this.onLinkClick(e)))}onInit(){super.onInit(...arguments),this.isOptimizedAssetsLoading()&&!elementorFrontend.isEditMode()&&this.elements.$links.each(((e,t)=>{if(this.isLightboxLink(t))return t.addEventListener("mouseover",()=>{this.createLightbox(t)}),t.addEventListener("mouseout",()=>{this.removeLastLightbox()}),!1}))}async createLightbox(e){const t=jQuery(e),n=t.data("elementor-lightbox-slideshow"),i=t.data("elementor-lightbox-video");let s=e.dataset.elementorLightbox?JSON.parse(e.dataset.elementorLightbox):{};if(n){s=this.getSlideshow(t);const e=t.data("elementor-lightbox-index");s.startAt=e}else i&&(s.type="video",s.videoAspectRatio=t.data("aspect-ratio"));const o=await import(/* webpackChunkName: 'lightbox' */ "elementor-frontend/utils/lightbox/lightbox");return elementorFrontend.utils.lightbox=new o.default(s),elementorFrontend.utils.lightbox}async removeLastLightbox(){const e=await elementorFrontend.utils.lightbox;e?.getModal()?.destroy()}getSlideshow(e){const t=e.data("elementor-lightbox-slideshow"),n=jQuery(this.getSettings("selectors.links")).filter((function(){const n=jQuery(this);return t===n.data("elementor-lightbox-slideshow")}));let i=[];return n.each((function(){const e=this.dataset.elementorLightboxVideo;let t=this.href;e&&(t=e),i.push({url:t,type:e?"video":"image"})})),0<i.length&&(i={slides:i,swiper:{initialSlide:n.index(e)}}),i}}t.default=LightboxManager}},e=>{e(e.s=5686)}]);